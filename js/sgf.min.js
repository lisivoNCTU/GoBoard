/*
 @license Go Board v1.0
 Jao-Hui, Chang. lightman.chang@gmail.com
 License: MIT
*/
function sgf(){this.draw=function(t,o,a){var r=document.getElementById(t);board_width=Math.min(r.width,r.height),board_block=Math.floor(board_width/this.SZ),board_width=board_block*(this.SZ-1),board_start=(Math.min(r.width,r.height)-board_width)/2;var b=r.getContext("2d");for(b.textAlign="center",b.beginPath(),x=0;x<this.SZ;x++)b.fillText(x+1,board_start+x*board_block,board_start-Math.floor(board_block/3)),b.moveTo(board_start+x*board_block,board_start),b.lineTo(board_start+x*board_block,board_width+board_start),b.fillText(x+1,board_start+board_width+Math.floor(2*board_block/3),board_start+x*board_block+Math.floor(board_block/3)),b.moveTo(board_start,board_start+x*board_block),b.lineTo(board_width+board_start,board_start+x*board_block);for(b.stroke(),x=3;x<this.SZ;x+=(this.SZ-1)/2-3)for(y=3;y<this.SZ;y+=(this.SZ-1)/2-3)b.beginPath(),b.arc(board_start+x*board_block,board_start+y*board_block,Math.ceil(board_block/5),0,2*Math.PI,!1),b.fillStyle="black",b.fill();for(o=void 0==o?this.board.length:Math.min(this.board.length,o),a=void 0==a?!0:a,i=0;i<o;i++){switch(b.beginPath(),this.board[i].stone){case"W":b.arc(board_start+(this.board[i].x-1)*board_block,board_start+(this.board[i].y-1)*board_block,Math.ceil(board_block/2)-1,0,2*Math.PI,!1),b.fillStyle="black",b.fill(),b.fillStyle="white";break;case"B":b.arc(board_start+(this.board[i].x-1)*board_block,board_start+(this.board[i].y-1)*board_block,Math.ceil(board_block/2)-1,0,2*Math.PI,!1),b.fillStyle="white",b.fill(),b.strokeStyle="black",b.stroke(),b.fillStyle="black"}a&&b.fillText(i+1,board_start+(this.board[i].x-1)*board_block,board_start+(this.board[i].y-1)*board_block+Math.ceil(board_block/7))}},this.load=function(o){for(this.row=o,this.board=this.row.split(";").map(function(t){var o=t.split(/[\[\!\]]+/);if(["B","W"].indexOf(o[0])>-1){var a={};return a.stone=o[0],a.x=parseInt(o[1].substr(0,1),30),a.y=parseInt(o[1].substr(1,1),30),a.x-=a.x>18?10:9,a.y-=a.y>18?10:9,a.x>18&&(a.x-=10),a}}).filter(function(t){return void 0!=t}),t=this.row.split(";")[1].split(/[\[\!\]]+/),i=0;i<t.length-1;i+=2)this[t[i]]=t[i+1];void 0==this.SZ&&(this.SZ=19)}}
